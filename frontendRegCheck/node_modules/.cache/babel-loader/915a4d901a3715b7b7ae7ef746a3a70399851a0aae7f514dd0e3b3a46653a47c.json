{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { h, ref, computed, watch, onBeforeUpdate, onUpdated, onBeforeUnmount, nextTick, getCurrentInstance } from 'vue';\nimport QField from '../field/QField.js';\nimport QIcon from '../icon/QIcon.js';\nimport QChip from '../chip/QChip.js';\nimport QItem from '../item/QItem.js';\nimport QItemSection from '../item/QItemSection.js';\nimport QItemLabel from '../item/QItemLabel.js';\nimport QMenu from '../menu/QMenu.js';\nimport QDialog from '../dialog/QDialog.js';\nimport useField, { useFieldState, useFieldProps, useFieldEmits, fieldValueIsFilled } from '../../composables/private.use-field/use-field.js';\nimport { useVirtualScroll, useVirtualScrollProps } from '../virtual-scroll/use-virtual-scroll.js';\nimport { useFormProps, useFormInputNameAttr } from '../../composables/use-form/private.use-form.js';\nimport useKeyComposition from '../../composables/private.use-key-composition/use-key-composition.js';\nimport { createComponent } from '../../utils/private.create/create.js';\nimport { isDeepEqual } from '../../utils/is/is.js';\nimport { stop, prevent, stopAndPrevent } from '../../utils/event/event.js';\nimport { normalizeToInterval } from '../../utils/format/format.js';\nimport { shouldIgnoreKey, isKeyCode } from '../../utils/private.keyboard/key-composition.js';\nimport { hMergeSlot } from '../../utils/private.render/render.js';\nconst validateNewValueMode = v => ['add', 'add-unique', 'toggle'].includes(v);\nconst reEscapeList = '.*+?^${}()|[]\\\\';\nconst fieldPropsList = Object.keys(useFieldProps);\nfunction getPropValueFn(userPropName, defaultPropName) {\n  if (typeof userPropName === 'function') return userPropName;\n  const propName = userPropName !== void 0 ? userPropName : defaultPropName;\n  return opt => opt !== null && typeof opt === 'object' && propName in opt ? opt[propName] : opt;\n}\nexport default createComponent({\n  name: 'QSelect',\n  inheritAttrs: false,\n  props: {\n    ...useVirtualScrollProps,\n    ...useFormProps,\n    ...useFieldProps,\n    // override of useFieldProps > modelValue\n    modelValue: {\n      required: true\n    },\n    multiple: Boolean,\n    displayValue: [String, Number],\n    displayValueHtml: Boolean,\n    dropdownIcon: String,\n    options: {\n      type: Array,\n      default: () => []\n    },\n    optionValue: [Function, String],\n    optionLabel: [Function, String],\n    optionDisable: [Function, String],\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n    maxValues: [Number, String],\n    optionsDense: Boolean,\n    optionsDark: {\n      type: Boolean,\n      default: null\n    },\n    optionsSelectedClass: String,\n    optionsHtml: Boolean,\n    optionsCover: Boolean,\n    menuShrink: Boolean,\n    menuAnchor: String,\n    menuSelf: String,\n    menuOffset: Array,\n    popupContentClass: String,\n    popupContentStyle: [String, Array, Object],\n    popupNoRouteDismiss: Boolean,\n    useInput: Boolean,\n    useChips: Boolean,\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n    mapOptions: Boolean,\n    emitValue: Boolean,\n    disableTabSelection: Boolean,\n    inputDebounce: {\n      type: [Number, String],\n      default: 500\n    },\n    inputClass: [Array, String, Object],\n    inputStyle: [Array, String, Object],\n    tabindex: {\n      type: [String, Number],\n      default: 0\n    },\n    autocomplete: String,\n    transitionShow: {},\n    transitionHide: {},\n    transitionDuration: {},\n    behavior: {\n      type: String,\n      validator: v => ['default', 'menu', 'dialog'].includes(v),\n      default: 'default'\n    },\n    // override of useVirtualScrollProps > virtualScrollItemSize (no default)\n    virtualScrollItemSize: useVirtualScrollProps.virtualScrollItemSize.type,\n    onNewValue: Function,\n    onFilter: Function\n  },\n  emits: [...useFieldEmits, 'add', 'remove', 'inputValue', 'keyup', 'keypress', 'keydown', 'popupShow', 'popupHide', 'filterAbort'],\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const {\n      proxy\n    } = getCurrentInstance();\n    const {\n      $q\n    } = proxy;\n    const menu = ref(false);\n    const dialog = ref(false);\n    const optionIndex = ref(-1);\n    const inputValue = ref('');\n    const dialogFieldFocused = ref(false);\n    const innerLoadingIndicator = ref(false);\n    let filterTimer = null,\n      inputValueTimer = null,\n      innerValueCache,\n      hasDialog,\n      userInputValue,\n      filterId = null,\n      defaultInputValue,\n      transitionShowComputed,\n      searchBuffer,\n      searchBufferExp;\n    const inputRef = ref(null);\n    const targetRef = ref(null);\n    const menuRef = ref(null);\n    const dialogRef = ref(null);\n    const menuContentRef = ref(null);\n    const nameProp = useFormInputNameAttr(props);\n    const onComposition = useKeyComposition(onInput);\n    const virtualScrollLength = computed(() => Array.isArray(props.options) ? props.options.length : 0);\n    const virtualScrollItemSizeComputed = computed(() => props.virtualScrollItemSize === void 0 ? props.optionsDense === true ? 24 : 48 : props.virtualScrollItemSize);\n    const {\n      virtualScrollSliceRange,\n      virtualScrollSliceSizeComputed,\n      localResetVirtualScroll,\n      padVirtualScroll,\n      onVirtualScrollEvt,\n      scrollTo,\n      setVirtualScrollSize\n    } = useVirtualScroll({\n      virtualScrollLength,\n      getVirtualScrollTarget,\n      getVirtualScrollEl,\n      virtualScrollItemSizeComputed\n    });\n    const state = useFieldState();\n    const innerValue = computed(() => {\n      const mapNull = props.mapOptions === true && props.multiple !== true,\n        val = props.modelValue !== void 0 && (props.modelValue !== null || mapNull === true) ? props.multiple === true && Array.isArray(props.modelValue) ? props.modelValue : [props.modelValue] : [];\n      if (props.mapOptions === true && Array.isArray(props.options) === true) {\n        const cache = props.mapOptions === true && innerValueCache !== void 0 ? innerValueCache : [];\n        const values = val.map(v => getOption(v, cache));\n        return props.modelValue === null && mapNull === true ? values.filter(v => v !== null) : values;\n      }\n      return val;\n    });\n    const innerFieldProps = computed(() => {\n      const acc = {};\n      fieldPropsList.forEach(key => {\n        const val = props[key];\n        if (val !== void 0) {\n          acc[key] = val;\n        }\n      });\n      return acc;\n    });\n    const isOptionsDark = computed(() => props.optionsDark === null ? state.isDark.value : props.optionsDark);\n    const hasValue = computed(() => fieldValueIsFilled(innerValue.value));\n    const computedInputClass = computed(() => {\n      let cls = 'q-field__input q-placeholder col';\n      if (props.hideSelected === true || innerValue.value.length === 0) {\n        return [cls, props.inputClass];\n      }\n      cls += ' q-field__input--padding';\n      return props.inputClass === void 0 ? cls : [cls, props.inputClass];\n    });\n    const menuContentClass = computed(() => (props.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '') + (props.popupContentClass ? ' ' + props.popupContentClass : ''));\n    const noOptions = computed(() => virtualScrollLength.value === 0);\n    const selectedString = computed(() => innerValue.value.map(opt => getOptionLabel.value(opt)).join(', '));\n    const ariaCurrentValue = computed(() => props.displayValue !== void 0 ? props.displayValue : selectedString.value);\n    const needsHtmlFn = computed(() => props.optionsHtml === true ? () => true : opt => opt !== void 0 && opt !== null && opt.html === true);\n    const valueAsHtml = computed(() => props.displayValueHtml === true || props.displayValue === void 0 && (props.optionsHtml === true || innerValue.value.some(needsHtmlFn.value)));\n    const tabindex = computed(() => state.focused.value === true ? props.tabindex : -1);\n    const comboboxAttrs = computed(() => {\n      const attrs = {\n        tabindex: props.tabindex,\n        role: 'combobox',\n        'aria-label': props.label,\n        'aria-readonly': props.readonly === true ? 'true' : 'false',\n        'aria-autocomplete': props.useInput === true ? 'list' : 'none',\n        'aria-expanded': menu.value === true ? 'true' : 'false',\n        'aria-controls': `${state.targetUid.value}_lb`\n      };\n      if (optionIndex.value >= 0) {\n        attrs['aria-activedescendant'] = `${state.targetUid.value}_${optionIndex.value}`;\n      }\n      return attrs;\n    });\n    const listboxAttrs = computed(() => ({\n      id: `${state.targetUid.value}_lb`,\n      role: 'listbox',\n      'aria-multiselectable': props.multiple === true ? 'true' : 'false'\n    }));\n    const selectedScope = computed(() => {\n      return innerValue.value.map((opt, i) => ({\n        index: i,\n        opt,\n        html: needsHtmlFn.value(opt),\n        selected: true,\n        removeAtIndex: removeAtIndexAndFocus,\n        toggleOption,\n        tabindex: tabindex.value\n      }));\n    });\n    const optionScope = computed(() => {\n      if (virtualScrollLength.value === 0) {\n        return [];\n      }\n      const {\n        from,\n        to\n      } = virtualScrollSliceRange.value;\n      return props.options.slice(from, to).map((opt, i) => {\n        const disable = isOptionDisabled.value(opt) === true;\n        const active = isOptionSelected(opt) === true;\n        const index = from + i;\n        const itemProps = {\n          clickable: true,\n          active,\n          activeClass: computedOptionsSelectedClass.value,\n          manualFocus: true,\n          focused: false,\n          disable,\n          tabindex: -1,\n          dense: props.optionsDense,\n          dark: isOptionsDark.value,\n          role: 'option',\n          'aria-selected': active === true ? 'true' : 'false',\n          id: `${state.targetUid.value}_${index}`,\n          onClick: () => {\n            toggleOption(opt);\n          }\n        };\n        if (disable !== true) {\n          optionIndex.value === index && (itemProps.focused = true);\n          if ($q.platform.is.desktop === true) {\n            itemProps.onMousemove = () => {\n              menu.value === true && setOptionIndex(index);\n            };\n          }\n        }\n        return {\n          index,\n          opt,\n          html: needsHtmlFn.value(opt),\n          label: getOptionLabel.value(opt),\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption,\n          setOptionIndex,\n          itemProps\n        };\n      });\n    });\n    const dropdownArrowIcon = computed(() => props.dropdownIcon !== void 0 ? props.dropdownIcon : $q.iconSet.arrow.dropdown);\n    const squaredMenu = computed(() => props.optionsCover === false && props.outlined !== true && props.standout !== true && props.borderless !== true && props.rounded !== true);\n    const computedOptionsSelectedClass = computed(() => props.optionsSelectedClass !== void 0 ? props.optionsSelectedClass : props.color !== void 0 ? `text-${props.color}` : '');\n\n    // returns method to get value of an option;\n    // takes into account 'option-value' prop\n    const getOptionValue = computed(() => getPropValueFn(props.optionValue, 'value'));\n\n    // returns method to get label of an option;\n    // takes into account 'option-label' prop\n    const getOptionLabel = computed(() => getPropValueFn(props.optionLabel, 'label'));\n\n    // returns method to tell if an option is disabled;\n    // takes into account 'option-disable' prop\n    const isOptionDisabled = computed(() => getPropValueFn(props.optionDisable, 'disable'));\n    const innerOptionsValue = computed(() => innerValue.value.map(getOptionValue.value));\n    const inputControlEvents = computed(() => {\n      const evt = {\n        onInput,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        onChange: onComposition,\n        onKeydown: onTargetKeydown,\n        onKeyup: onTargetAutocomplete,\n        onKeypress: onTargetKeypress,\n        onFocus: selectInputText,\n        onClick(e) {\n          hasDialog === true && stop(e);\n        }\n      };\n      evt.onCompositionstart = evt.onCompositionupdate = evt.onCompositionend = onComposition;\n      return evt;\n    });\n    watch(innerValue, val => {\n      innerValueCache = val;\n      if (props.useInput === true && props.fillInput === true && props.multiple !== true\n      // Prevent re-entering in filter while filtering\n      // Also prevent clearing inputValue while filtering\n      && state.innerLoading.value !== true && (dialog.value !== true && menu.value !== true || hasValue.value !== true)) {\n        userInputValue !== true && resetInputValue();\n        if (dialog.value === true || menu.value === true) {\n          filter('');\n        }\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.fillInput, resetInputValue);\n    watch(menu, updateMenu);\n    watch(virtualScrollLength, rerenderMenu);\n    function getEmittingOptionValue(opt) {\n      return props.emitValue === true ? getOptionValue.value(opt) : opt;\n    }\n    function removeAtIndex(index) {\n      if (index !== -1 && index < innerValue.value.length) {\n        if (props.multiple === true) {\n          const model = props.modelValue.slice();\n          emit('remove', {\n            index,\n            value: model.splice(index, 1)[0]\n          });\n          emit('update:modelValue', model);\n        } else {\n          emit('update:modelValue', null);\n        }\n      }\n    }\n    function removeAtIndexAndFocus(index) {\n      removeAtIndex(index);\n      state.focus();\n    }\n    function add(opt, unique) {\n      const val = getEmittingOptionValue(opt);\n      if (props.multiple !== true) {\n        props.fillInput === true && updateInputValue(getOptionLabel.value(opt), true, true);\n        emit('update:modelValue', val);\n        return;\n      }\n      if (innerValue.value.length === 0) {\n        emit('add', {\n          index: 0,\n          value: val\n        });\n        emit('update:modelValue', props.multiple === true ? [val] : val);\n        return;\n      }\n      if (unique === true && isOptionSelected(opt) === true) return;\n      if (props.maxValues !== void 0 && props.modelValue.length >= props.maxValues) return;\n      const model = props.modelValue.slice();\n      emit('add', {\n        index: model.length,\n        value: val\n      });\n      model.push(val);\n      emit('update:modelValue', model);\n    }\n    function toggleOption(opt, keepOpen) {\n      if (state.editable.value !== true || opt === void 0 || isOptionDisabled.value(opt) === true) return;\n      const optValue = getOptionValue.value(opt);\n      if (props.multiple !== true) {\n        if (keepOpen !== true) {\n          updateInputValue(props.fillInput === true ? getOptionLabel.value(opt) : '', true, true);\n          hidePopup();\n        }\n        targetRef.value !== null && targetRef.value.focus();\n        if (innerValue.value.length === 0 || isDeepEqual(getOptionValue.value(innerValue.value[0]), optValue) !== true) {\n          emit('update:modelValue', props.emitValue === true ? optValue : opt);\n        }\n        return;\n      }\n      (hasDialog !== true || dialogFieldFocused.value === true) && state.focus();\n      selectInputText();\n      if (innerValue.value.length === 0) {\n        const val = props.emitValue === true ? optValue : opt;\n        emit('add', {\n          index: 0,\n          value: val\n        });\n        emit('update:modelValue', props.multiple === true ? [val] : val);\n        return;\n      }\n      const model = props.modelValue.slice(),\n        index = innerOptionsValue.value.findIndex(v => isDeepEqual(v, optValue));\n      if (index !== -1) {\n        emit('remove', {\n          index,\n          value: model.splice(index, 1)[0]\n        });\n      } else {\n        if (props.maxValues !== void 0 && model.length >= props.maxValues) return;\n        const val = props.emitValue === true ? optValue : opt;\n        emit('add', {\n          index: model.length,\n          value: val\n        });\n        model.push(val);\n      }\n      emit('update:modelValue', model);\n    }\n    function setOptionIndex(index) {\n      if ($q.platform.is.desktop !== true) return;\n      const val = index !== -1 && index < virtualScrollLength.value ? index : -1;\n      if (optionIndex.value !== val) {\n        optionIndex.value = val;\n      }\n    }\n    function moveOptionSelection(offset = 1, skipInputValue) {\n      if (menu.value === true) {\n        let index = optionIndex.value;\n        do {\n          index = normalizeToInterval(index + offset, -1, virtualScrollLength.value - 1);\n        } while (index !== -1 && index !== optionIndex.value && isOptionDisabled.value(props.options[index]) === true);\n        if (optionIndex.value !== index) {\n          setOptionIndex(index);\n          scrollTo(index);\n          if (skipInputValue !== true && props.useInput === true && props.fillInput === true) {\n            setInputValue(index >= 0 ? getOptionLabel.value(props.options[index]) : defaultInputValue, true);\n          }\n        }\n      }\n    }\n    function getOption(value, valueCache) {\n      const fn = opt => isDeepEqual(getOptionValue.value(opt), value);\n      return props.options.find(fn) || valueCache.find(fn) || value;\n    }\n    function isOptionSelected(opt) {\n      const val = getOptionValue.value(opt);\n      return innerOptionsValue.value.find(v => isDeepEqual(v, val)) !== void 0;\n    }\n    function selectInputText(e) {\n      if (props.useInput === true && targetRef.value !== null && (e === void 0 || targetRef.value === e.target && e.target.value === selectedString.value)) {\n        targetRef.value.select();\n      }\n    }\n    function onTargetKeyup(e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (isKeyCode(e, 27) === true && menu.value === true) {\n        stop(e);\n        // on ESC we need to close the dialog also\n        hidePopup();\n        resetInputValue();\n      }\n      emit('keyup', e);\n    }\n    function onTargetAutocomplete(e) {\n      const {\n        value\n      } = e.target;\n      if (e.keyCode !== void 0) {\n        onTargetKeyup(e);\n        return;\n      }\n      e.target.value = '';\n      if (filterTimer !== null) {\n        clearTimeout(filterTimer);\n        filterTimer = null;\n      }\n      if (inputValueTimer !== null) {\n        clearTimeout(inputValueTimer);\n        inputValueTimer = null;\n      }\n      resetInputValue();\n      if (typeof value === 'string' && value.length !== 0) {\n        const needle = value.toLocaleLowerCase();\n        const findFn = extractFn => {\n          const option = props.options.find(opt => String(extractFn.value(opt)).toLocaleLowerCase() === needle);\n          if (option === void 0) return false;\n          if (innerValue.value.indexOf(option) === -1) {\n            toggleOption(option);\n          } else {\n            hidePopup();\n          }\n          return true;\n        };\n        const fillFn = afterFilter => {\n          if (findFn(getOptionValue) !== true && afterFilter !== true && findFn(getOptionLabel) !== true) {\n            filter(value, true, () => fillFn(true));\n          }\n        };\n        fillFn();\n      } else {\n        state.clearValue(e);\n      }\n    }\n    function onTargetKeypress(e) {\n      emit('keypress', e);\n    }\n    function onTargetKeydown(e) {\n      emit('keydown', e);\n      if (shouldIgnoreKey(e) === true) return;\n      const newValueModeValid = inputValue.value.length !== 0 && (props.newValueMode !== void 0 || props.onNewValue !== void 0);\n      const tabShouldSelect = e.shiftKey !== true && props.disableTabSelection !== true && props.multiple !== true && (optionIndex.value !== -1 || newValueModeValid === true);\n\n      // escape\n      if (e.keyCode === 27) {\n        prevent(e); // prevent clearing the inputValue\n        return;\n      }\n\n      // tab\n      if (e.keyCode === 9 && tabShouldSelect === false) {\n        closeMenu();\n        return;\n      }\n      if (e.target === void 0 || e.target.id !== state.targetUid.value || state.editable.value !== true) return;\n\n      // down\n      if (e.keyCode === 40 && state.innerLoading.value !== true && menu.value === false) {\n        stopAndPrevent(e);\n        showPopup();\n        return;\n      }\n\n      // backspace\n      if (e.keyCode === 8 && (props.useChips === true || props.clearable === true) && props.hideSelected !== true && inputValue.value.length === 0) {\n        if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n          removeAtIndex(props.modelValue.length - 1);\n        } else if (props.multiple !== true && props.modelValue !== null) {\n          emit('update:modelValue', null);\n        }\n        return;\n      }\n\n      // home, end - 36, 35\n      if ((e.keyCode === 35 || e.keyCode === 36) && (typeof inputValue.value !== 'string' || inputValue.value.length === 0)) {\n        stopAndPrevent(e);\n        optionIndex.value = -1;\n        moveOptionSelection(e.keyCode === 36 ? 1 : -1, props.multiple);\n      }\n\n      // pg up, pg down - 33, 34\n      if ((e.keyCode === 33 || e.keyCode === 34) && virtualScrollSliceSizeComputed.value !== void 0) {\n        stopAndPrevent(e);\n        optionIndex.value = Math.max(-1, Math.min(virtualScrollLength.value, optionIndex.value + (e.keyCode === 33 ? -1 : 1) * virtualScrollSliceSizeComputed.value.view));\n        moveOptionSelection(e.keyCode === 33 ? 1 : -1, props.multiple);\n      }\n\n      // up, down\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e);\n        moveOptionSelection(e.keyCode === 38 ? -1 : 1, props.multiple);\n      }\n      const optionsLength = virtualScrollLength.value;\n\n      // clear search buffer if expired\n      if (searchBuffer === void 0 || searchBufferExp < Date.now()) {\n        searchBuffer = '';\n      }\n\n      // keyboard search when not having use-input\n      if (optionsLength > 0 && props.useInput !== true && e.key !== void 0 && e.key.length === 1 // printable char\n      && e.altKey === false // not kbd shortcut\n      && e.ctrlKey === false // not kbd shortcut\n      && e.metaKey === false // not kbd shortcut, especially on macOS with Command key\n      && (e.keyCode !== 32 || searchBuffer.length !== 0) // space in middle of search\n      ) {\n        menu.value !== true && showPopup(e);\n        const char = e.key.toLocaleLowerCase(),\n          keyRepeat = searchBuffer.length === 1 && searchBuffer[0] === char;\n        searchBufferExp = Date.now() + 1500;\n        if (keyRepeat === false) {\n          stopAndPrevent(e);\n          searchBuffer += char;\n        }\n        const searchRe = new RegExp('^' + searchBuffer.split('').map(l => reEscapeList.indexOf(l) !== -1 ? '\\\\' + l : l).join('.*'), 'i');\n        let index = optionIndex.value;\n        if (keyRepeat === true || index < 0 || searchRe.test(getOptionLabel.value(props.options[index])) !== true) {\n          do {\n            index = normalizeToInterval(index + 1, -1, optionsLength - 1);\n          } while (index !== optionIndex.value && (isOptionDisabled.value(props.options[index]) === true || searchRe.test(getOptionLabel.value(props.options[index])) !== true));\n        }\n        if (optionIndex.value !== index) {\n          nextTick(() => {\n            setOptionIndex(index);\n            scrollTo(index);\n            if (index >= 0 && props.useInput === true && props.fillInput === true) {\n              setInputValue(getOptionLabel.value(props.options[index]), true);\n            }\n          });\n        }\n        return;\n      }\n\n      // enter, space (when not using use-input and not in search), or tab (when not using multiple and option selected)\n      // same target is checked above\n      if (e.keyCode !== 13 && (e.keyCode !== 32 || props.useInput === true || searchBuffer !== '') && (e.keyCode !== 9 || tabShouldSelect === false)) return;\n      e.keyCode !== 9 && stopAndPrevent(e);\n      if (optionIndex.value !== -1 && optionIndex.value < optionsLength) {\n        toggleOption(props.options[optionIndex.value]);\n        return;\n      }\n      if (newValueModeValid === true) {\n        const done = (val, mode) => {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) return;\n          } else {\n            mode = props.newValueMode;\n          }\n          updateInputValue('', props.multiple !== true, true);\n          if (val === void 0 || val === null) return;\n          const fn = mode === 'toggle' ? toggleOption : add;\n          fn(val, mode === 'add-unique');\n          if (props.multiple !== true) {\n            targetRef.value !== null && targetRef.value.focus();\n            hidePopup();\n          }\n        };\n        if (props.onNewValue !== void 0) {\n          emit('newValue', inputValue.value, done);\n        } else {\n          done(inputValue.value);\n        }\n        if (props.multiple !== true) return;\n      }\n      if (menu.value === true) {\n        closeMenu();\n      } else if (state.innerLoading.value !== true) {\n        showPopup();\n      }\n    }\n    function getVirtualScrollEl() {\n      return hasDialog === true ? menuContentRef.value : menuRef.value !== null && menuRef.value.contentEl !== null ? menuRef.value.contentEl : void 0;\n    }\n    function getVirtualScrollTarget() {\n      return getVirtualScrollEl();\n    }\n    function getSelection() {\n      if (props.hideSelected === true) {\n        return [];\n      }\n      if (slots['selected-item'] !== void 0) {\n        return selectedScope.value.map(scope => slots['selected-item'](scope)).slice();\n      }\n      if (slots.selected !== void 0) {\n        return [].concat(slots.selected());\n      }\n      if (props.useChips === true) {\n        return selectedScope.value.map((scope, i) => h(QChip, {\n          key: 'option-' + i,\n          removable: state.editable.value === true && isOptionDisabled.value(scope.opt) !== true,\n          dense: true,\n          textColor: props.color,\n          tabindex: tabindex.value,\n          onRemove() {\n            scope.removeAtIndex(i);\n          }\n        }, () => h('span', {\n          class: 'ellipsis',\n          [scope.html === true ? 'innerHTML' : 'textContent']: getOptionLabel.value(scope.opt)\n        })));\n      }\n      return [h('span', {\n        [valueAsHtml.value === true ? 'innerHTML' : 'textContent']: ariaCurrentValue.value\n      })];\n    }\n    function getAllOptions() {\n      if (noOptions.value === true) {\n        return slots['no-option'] !== void 0 ? slots['no-option']({\n          inputValue: inputValue.value\n        }) : void 0;\n      }\n      const fn = slots.option !== void 0 ? slots.option : scope => {\n        return h(QItem, {\n          key: scope.index,\n          ...scope.itemProps\n        }, () => {\n          return h(QItemSection, () => h(QItemLabel, () => h('span', {\n            [scope.html === true ? 'innerHTML' : 'textContent']: scope.label\n          })));\n        });\n      };\n      let options = padVirtualScroll('div', optionScope.value.map(fn));\n      if (slots['before-options'] !== void 0) {\n        options = slots['before-options']().concat(options);\n      }\n      return hMergeSlot(slots['after-options'], options);\n    }\n    function getInput(fromDialog, isTarget) {\n      const attrs = isTarget === true ? {\n        ...comboboxAttrs.value,\n        ...state.splitAttrs.attributes.value\n      } : void 0;\n      const data = {\n        ref: isTarget === true ? targetRef : void 0,\n        key: 'i_t',\n        class: computedInputClass.value,\n        style: props.inputStyle,\n        value: inputValue.value !== void 0 ? inputValue.value : '',\n        // required for Android in order to show ENTER key when in form\n        type: 'search',\n        ...attrs,\n        id: isTarget === true ? state.targetUid.value : void 0,\n        maxlength: props.maxlength,\n        autocomplete: props.autocomplete,\n        'data-autofocus': fromDialog === true || props.autofocus === true || void 0,\n        disabled: props.disable === true,\n        readonly: props.readonly === true,\n        ...inputControlEvents.value\n      };\n      if (fromDialog !== true && hasDialog === true) {\n        if (Array.isArray(data.class) === true) {\n          data.class = [...data.class, 'no-pointer-events'];\n        } else {\n          data.class += ' no-pointer-events';\n        }\n      }\n      return h('input', data);\n    }\n    function onInput(e) {\n      if (filterTimer !== null) {\n        clearTimeout(filterTimer);\n        filterTimer = null;\n      }\n      if (inputValueTimer !== null) {\n        clearTimeout(inputValueTimer);\n        inputValueTimer = null;\n      }\n      if (e && e.target && e.target.qComposing === true) return;\n      setInputValue(e.target.value || '');\n      // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n      userInputValue = true;\n      defaultInputValue = inputValue.value;\n      if (state.focused.value !== true && (hasDialog !== true || dialogFieldFocused.value === true)) {\n        state.focus();\n      }\n      if (props.onFilter !== void 0) {\n        filterTimer = setTimeout(() => {\n          filterTimer = null;\n          filter(inputValue.value);\n        }, props.inputDebounce);\n      }\n    }\n    function setInputValue(val, emitImmediately) {\n      if (inputValue.value !== val) {\n        inputValue.value = val;\n        if (emitImmediately === true || props.inputDebounce === 0 || props.inputDebounce === '0') {\n          emit('inputValue', val);\n        } else {\n          inputValueTimer = setTimeout(() => {\n            inputValueTimer = null;\n            emit('inputValue', val);\n          }, props.inputDebounce);\n        }\n      }\n    }\n    function updateInputValue(val, noFiltering, internal) {\n      userInputValue = internal !== true;\n      if (props.useInput === true) {\n        setInputValue(val, true);\n        if (noFiltering === true || internal !== true) {\n          defaultInputValue = val;\n        }\n        noFiltering !== true && filter(val);\n      }\n    }\n    function filter(val, keepClosed, afterUpdateFn) {\n      if (props.onFilter === void 0 || keepClosed !== true && state.focused.value !== true) return;\n      if (state.innerLoading.value === true) {\n        emit('filterAbort');\n      } else {\n        state.innerLoading.value = true;\n        innerLoadingIndicator.value = true;\n      }\n      if (val !== '' && props.multiple !== true && innerValue.value.length !== 0 && userInputValue !== true && val === getOptionLabel.value(innerValue.value[0])) {\n        val = '';\n      }\n      const localFilterId = setTimeout(() => {\n        menu.value === true && (menu.value = false);\n      }, 10);\n      filterId !== null && clearTimeout(filterId);\n      filterId = localFilterId;\n      emit('filter', val, (fn, afterFn) => {\n        if ((keepClosed === true || state.focused.value === true) && filterId === localFilterId) {\n          clearTimeout(filterId);\n          typeof fn === 'function' && fn();\n\n          // hide indicator to allow arrow to animate\n          innerLoadingIndicator.value = false;\n          nextTick(() => {\n            state.innerLoading.value = false;\n            if (state.editable.value === true) {\n              if (keepClosed === true) {\n                menu.value === true && hidePopup();\n              } else if (menu.value === true) {\n                updateMenu(true);\n              } else {\n                menu.value = true;\n              }\n            }\n            typeof afterFn === 'function' && nextTick(() => {\n              afterFn(proxy);\n            });\n            typeof afterUpdateFn === 'function' && nextTick(() => {\n              afterUpdateFn(proxy);\n            });\n          });\n        }\n      }, () => {\n        if (state.focused.value === true && filterId === localFilterId) {\n          clearTimeout(filterId);\n          state.innerLoading.value = false;\n          innerLoadingIndicator.value = false;\n        }\n        menu.value === true && (menu.value = false);\n      });\n    }\n    function getMenu() {\n      return h(QMenu, {\n        ref: menuRef,\n        class: menuContentClass.value,\n        style: props.popupContentStyle,\n        modelValue: menu.value,\n        fit: props.menuShrink !== true,\n        cover: props.optionsCover === true && noOptions.value !== true && props.useInput !== true,\n        anchor: props.menuAnchor,\n        self: props.menuSelf,\n        offset: props.menuOffset,\n        dark: isOptionsDark.value,\n        noParentEvent: true,\n        noRefocus: true,\n        noFocus: true,\n        noRouteDismiss: props.popupNoRouteDismiss,\n        square: squaredMenu.value,\n        transitionShow: props.transitionShow,\n        transitionHide: props.transitionHide,\n        transitionDuration: props.transitionDuration,\n        separateClosePopup: true,\n        ...listboxAttrs.value,\n        onScrollPassive: onVirtualScrollEvt,\n        onBeforeShow: onControlPopupShow,\n        onBeforeHide: onMenuBeforeHide,\n        onShow: onMenuShow\n      }, getAllOptions);\n    }\n    function onMenuBeforeHide(e) {\n      onControlPopupHide(e);\n      closeMenu();\n    }\n    function onMenuShow() {\n      setVirtualScrollSize();\n    }\n    function onDialogFieldFocus(e) {\n      stop(e);\n      targetRef.value !== null && targetRef.value.focus();\n      dialogFieldFocused.value = true;\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0);\n    }\n    function onDialogFieldBlur(e) {\n      stop(e);\n      nextTick(() => {\n        dialogFieldFocused.value = false;\n      });\n    }\n    function getDialog() {\n      const content = [h(QField, {\n        class: `col-auto ${state.fieldClass.value}`,\n        ...innerFieldProps.value,\n        for: state.targetUid.value,\n        dark: isOptionsDark.value,\n        square: true,\n        loading: innerLoadingIndicator.value,\n        itemAligned: false,\n        filled: true,\n        stackLabel: inputValue.value.length !== 0,\n        ...state.splitAttrs.listeners.value,\n        onFocus: onDialogFieldFocus,\n        onBlur: onDialogFieldBlur\n      }, {\n        ...slots,\n        rawControl: () => state.getControl(true),\n        before: void 0,\n        after: void 0\n      })];\n      menu.value === true && content.push(h('div', {\n        ref: menuContentRef,\n        class: menuContentClass.value + ' scroll',\n        style: props.popupContentStyle,\n        ...listboxAttrs.value,\n        onClick: prevent,\n        onScrollPassive: onVirtualScrollEvt\n      }, getAllOptions()));\n      return h(QDialog, {\n        ref: dialogRef,\n        modelValue: dialog.value,\n        position: props.useInput === true ? 'top' : void 0,\n        transitionShow: transitionShowComputed,\n        transitionHide: props.transitionHide,\n        transitionDuration: props.transitionDuration,\n        noRouteDismiss: props.popupNoRouteDismiss,\n        onBeforeShow: onControlPopupShow,\n        onBeforeHide: onDialogBeforeHide,\n        onHide: onDialogHide,\n        onShow: onDialogShow\n      }, () => h('div', {\n        class: 'q-select__dialog' + (isOptionsDark.value === true ? ' q-select__dialog--dark q-dark' : '') + (dialogFieldFocused.value === true ? ' q-select__dialog--focused' : '')\n      }, content));\n    }\n    function onDialogBeforeHide(e) {\n      onControlPopupHide(e);\n      if (dialogRef.value !== null) {\n        dialogRef.value.__updateRefocusTarget(state.rootRef.value.querySelector('.q-field__native > [tabindex]:last-child'));\n      }\n      state.focused.value = false;\n    }\n    function onDialogHide(e) {\n      hidePopup();\n      state.focused.value === false && emit('blur', e);\n      resetInputValue();\n    }\n    function onDialogShow() {\n      const el = document.activeElement;\n      if ((el === null || el.id !== state.targetUid.value) && targetRef.value !== null && targetRef.value !== el) {\n        targetRef.value.focus();\n      }\n      setVirtualScrollSize();\n    }\n    function closeMenu() {\n      if (dialog.value === true) return;\n      optionIndex.value = -1;\n      if (menu.value === true) {\n        menu.value = false;\n      }\n      if (state.focused.value === false) {\n        if (filterId !== null) {\n          clearTimeout(filterId);\n          filterId = null;\n        }\n        if (state.innerLoading.value === true) {\n          emit('filterAbort');\n          state.innerLoading.value = false;\n          innerLoadingIndicator.value = false;\n        }\n      }\n    }\n    function showPopup(e) {\n      if (state.editable.value !== true) return;\n      if (hasDialog === true) {\n        state.onControlFocusin(e);\n        dialog.value = true;\n        nextTick(() => {\n          state.focus();\n        });\n      } else {\n        state.focus();\n      }\n      if (props.onFilter !== void 0) {\n        filter(inputValue.value);\n      } else if (noOptions.value !== true || slots['no-option'] !== void 0) {\n        menu.value = true;\n      }\n    }\n    function hidePopup() {\n      dialog.value = false;\n      closeMenu();\n    }\n    function resetInputValue() {\n      props.useInput === true && updateInputValue(props.multiple !== true && props.fillInput === true && innerValue.value.length !== 0 ? getOptionLabel.value(innerValue.value[0]) || '' : '', true, true);\n    }\n    function updateMenu(show) {\n      let optionIndex = -1;\n      if (show === true) {\n        if (innerValue.value.length !== 0) {\n          const val = getOptionValue.value(innerValue.value[0]);\n          optionIndex = props.options.findIndex(v => isDeepEqual(getOptionValue.value(v), val));\n        }\n        localResetVirtualScroll(optionIndex);\n      }\n      setOptionIndex(optionIndex);\n    }\n    function rerenderMenu(newLength, oldLength) {\n      if (menu.value === true && state.innerLoading.value === false) {\n        localResetVirtualScroll(-1, true);\n        nextTick(() => {\n          if (menu.value === true && state.innerLoading.value === false) {\n            if (newLength > oldLength) {\n              localResetVirtualScroll();\n            } else {\n              updateMenu(true);\n            }\n          }\n        });\n      }\n    }\n    function updateMenuPosition() {\n      if (dialog.value === false && menuRef.value !== null) {\n        menuRef.value.updatePosition();\n      }\n    }\n    function onControlPopupShow(e) {\n      e !== void 0 && stop(e);\n      emit('popupShow', e);\n      state.hasPopupOpen = true;\n      state.onControlFocusin(e);\n    }\n    function onControlPopupHide(e) {\n      e !== void 0 && stop(e);\n      emit('popupHide', e);\n      state.hasPopupOpen = false;\n      state.onControlFocusout(e);\n    }\n    function updatePreState() {\n      hasDialog = $q.platform.is.mobile !== true && props.behavior !== 'dialog' ? false : props.behavior !== 'menu' && (props.useInput === true ? slots['no-option'] !== void 0 || props.onFilter !== void 0 || noOptions.value === false : true);\n      transitionShowComputed = $q.platform.is.ios === true && hasDialog === true && props.useInput === true ? 'fade' : props.transitionShow;\n    }\n    onBeforeUpdate(updatePreState);\n    onUpdated(updateMenuPosition);\n    updatePreState();\n    onBeforeUnmount(() => {\n      filterTimer !== null && clearTimeout(filterTimer);\n      inputValueTimer !== null && clearTimeout(inputValueTimer);\n    });\n\n    // expose public methods\n    Object.assign(proxy, {\n      showPopup,\n      hidePopup,\n      removeAtIndex,\n      add,\n      toggleOption,\n      getOptionIndex: () => optionIndex.value,\n      setOptionIndex,\n      moveOptionSelection,\n      filter,\n      updateMenuPosition,\n      updateInputValue,\n      isOptionSelected,\n      getEmittingOptionValue,\n      isOptionDisabled: (...args) => isOptionDisabled.value.apply(null, args) === true,\n      getOptionValue: (...args) => getOptionValue.value.apply(null, args),\n      getOptionLabel: (...args) => getOptionLabel.value.apply(null, args)\n    });\n    Object.assign(state, {\n      innerValue,\n      fieldClass: computed(() => `q-select q-field--auto-height q-select--with${props.useInput !== true ? 'out' : ''}-input` + ` q-select--with${props.useChips !== true ? 'out' : ''}-chips` + ` q-select--${props.multiple === true ? 'multiple' : 'single'}`),\n      inputRef,\n      targetRef,\n      hasValue,\n      showPopup,\n      floatingLabel: computed(() => props.hideSelected !== true && hasValue.value === true || typeof inputValue.value === 'number' || inputValue.value.length !== 0 || fieldValueIsFilled(props.displayValue)),\n      getControlChild: () => {\n        if (state.editable.value !== false && (dialog.value === true // dialog always has menu displayed, so need to render it\n        || noOptions.value !== true || slots['no-option'] !== void 0)) {\n          return hasDialog === true ? getDialog() : getMenu();\n        } else if (state.hasPopupOpen === true) {\n          // explicitly set it otherwise TAB will not blur component\n          state.hasPopupOpen = false;\n        }\n      },\n      controlEvents: {\n        onFocusin(e) {\n          state.onControlFocusin(e);\n        },\n        onFocusout(e) {\n          state.onControlFocusout(e, () => {\n            resetInputValue();\n            closeMenu();\n          });\n        },\n        onClick(e) {\n          // label from QField will propagate click on the input\n          prevent(e);\n          if (hasDialog !== true && menu.value === true) {\n            closeMenu();\n            targetRef.value !== null && targetRef.value.focus();\n            return;\n          }\n          showPopup(e);\n        }\n      },\n      getControl: fromDialog => {\n        const child = getSelection();\n        const isTarget = fromDialog === true || dialog.value !== true || hasDialog !== true;\n        if (props.useInput === true) {\n          child.push(getInput(fromDialog, isTarget));\n        }\n        // there can be only one (when dialog is opened the control in dialog should be target)\n        else if (state.editable.value === true) {\n          const attrs = isTarget === true ? comboboxAttrs.value : void 0;\n          child.push(h('input', {\n            ref: isTarget === true ? targetRef : void 0,\n            key: 'd_t',\n            class: 'q-select__focus-target',\n            id: isTarget === true ? state.targetUid.value : void 0,\n            value: ariaCurrentValue.value,\n            readonly: true,\n            'data-autofocus': fromDialog === true || props.autofocus === true || void 0,\n            ...attrs,\n            onKeydown: onTargetKeydown,\n            onKeyup: onTargetKeyup,\n            onKeypress: onTargetKeypress\n          }));\n          if (isTarget === true && typeof props.autocomplete === 'string' && props.autocomplete.length !== 0) {\n            child.push(h('input', {\n              class: 'q-select__autocomplete-input',\n              autocomplete: props.autocomplete,\n              tabindex: -1,\n              onKeyup: onTargetAutocomplete\n            }));\n          }\n        }\n        if (nameProp.value !== void 0 && props.disable !== true && innerOptionsValue.value.length !== 0) {\n          const opts = innerOptionsValue.value.map(value => h('option', {\n            value,\n            selected: true\n          }));\n          child.push(h('select', {\n            class: 'hidden',\n            name: nameProp.value,\n            multiple: props.multiple\n          }, opts));\n        }\n        const attrs = props.useInput === true || isTarget !== true ? void 0 : state.splitAttrs.attributes.value;\n        return h('div', {\n          class: 'q-field__native row items-center',\n          ...attrs,\n          ...state.splitAttrs.listeners.value\n        }, child);\n      },\n      getInnerAppend: () => props.loading !== true && innerLoadingIndicator.value !== true && props.hideDropdownIcon !== true ? [h(QIcon, {\n        class: 'q-select__dropdown-icon' + (menu.value === true ? ' rotate-180' : ''),\n        name: dropdownArrowIcon.value\n      })] : null\n    });\n    return useField(state);\n  }\n});","map":{"version":3,"names":["h","ref","computed","watch","onBeforeUpdate","onUpdated","onBeforeUnmount","nextTick","getCurrentInstance","QField","QIcon","QChip","QItem","QItemSection","QItemLabel","QMenu","QDialog","useField","useFieldState","useFieldProps","useFieldEmits","fieldValueIsFilled","useVirtualScroll","useVirtualScrollProps","useFormProps","useFormInputNameAttr","useKeyComposition","createComponent","isDeepEqual","stop","prevent","stopAndPrevent","normalizeToInterval","shouldIgnoreKey","isKeyCode","hMergeSlot","validateNewValueMode","v","includes","reEscapeList","fieldPropsList","Object","keys","getPropValueFn","userPropName","defaultPropName","propName","opt","name","inheritAttrs","props","modelValue","required","multiple","Boolean","displayValue","String","Number","displayValueHtml","dropdownIcon","options","type","Array","default","optionValue","Function","optionLabel","optionDisable","hideSelected","hideDropdownIcon","fillInput","maxValues","optionsDense","optionsDark","optionsSelectedClass","optionsHtml","optionsCover","menuShrink","menuAnchor","menuSelf","menuOffset","popupContentClass","popupContentStyle","popupNoRouteDismiss","useInput","useChips","newValueMode","validator","mapOptions","emitValue","disableTabSelection","inputDebounce","inputClass","inputStyle","tabindex","autocomplete","transitionShow","transitionHide","transitionDuration","behavior","virtualScrollItemSize","onNewValue","onFilter","emits","setup","slots","emit","proxy","$q","menu","dialog","optionIndex","inputValue","dialogFieldFocused","innerLoadingIndicator","filterTimer","inputValueTimer","innerValueCache","hasDialog","userInputValue","filterId","defaultInputValue","transitionShowComputed","searchBuffer","searchBufferExp","inputRef","targetRef","menuRef","dialogRef","menuContentRef","nameProp","onComposition","onInput","virtualScrollLength","isArray","length","virtualScrollItemSizeComputed","virtualScrollSliceRange","virtualScrollSliceSizeComputed","localResetVirtualScroll","padVirtualScroll","onVirtualScrollEvt","scrollTo","setVirtualScrollSize","getVirtualScrollTarget","getVirtualScrollEl","state","innerValue","mapNull","val","cache","values","map","getOption","filter","innerFieldProps","acc","forEach","key","isOptionsDark","isDark","value","hasValue","computedInputClass","cls","menuContentClass","virtualScrollHorizontal","noOptions","selectedString","getOptionLabel","join","ariaCurrentValue","needsHtmlFn","html","valueAsHtml","some","focused","comboboxAttrs","attrs","role","label","readonly","targetUid","listboxAttrs","id","selectedScope","i","index","selected","removeAtIndex","removeAtIndexAndFocus","toggleOption","optionScope","from","to","slice","disable","isOptionDisabled","active","isOptionSelected","itemProps","clickable","activeClass","computedOptionsSelectedClass","manualFocus","dense","dark","onClick","platform","is","desktop","onMousemove","setOptionIndex","dropdownArrowIcon","iconSet","arrow","dropdown","squaredMenu","outlined","standout","borderless","rounded","color","getOptionValue","innerOptionsValue","inputControlEvents","evt","onChange","onKeydown","onTargetKeydown","onKeyup","onTargetAutocomplete","onKeypress","onTargetKeypress","onFocus","selectInputText","e","onCompositionstart","onCompositionupdate","onCompositionend","innerLoading","resetInputValue","immediate","updateMenu","rerenderMenu","getEmittingOptionValue","model","splice","focus","add","unique","updateInputValue","push","keepOpen","editable","optValue","hidePopup","findIndex","moveOptionSelection","offset","skipInputValue","setInputValue","valueCache","fn","find","target","select","onTargetKeyup","keyCode","clearTimeout","needle","toLocaleLowerCase","findFn","extractFn","option","indexOf","fillFn","afterFilter","clearValue","newValueModeValid","tabShouldSelect","shiftKey","closeMenu","showPopup","clearable","Math","max","min","view","optionsLength","Date","now","altKey","ctrlKey","metaKey","char","keyRepeat","searchRe","RegExp","split","l","test","done","mode","contentEl","getSelection","scope","concat","removable","textColor","onRemove","class","getAllOptions","getInput","fromDialog","isTarget","splitAttrs","attributes","data","style","maxlength","autofocus","disabled","qComposing","setTimeout","emitImmediately","noFiltering","internal","keepClosed","afterUpdateFn","localFilterId","afterFn","getMenu","fit","cover","anchor","self","noParentEvent","noRefocus","noFocus","noRouteDismiss","square","separateClosePopup","onScrollPassive","onBeforeShow","onControlPopupShow","onBeforeHide","onMenuBeforeHide","onShow","onMenuShow","onControlPopupHide","onDialogFieldFocus","window","pageXOffset","scrollX","document","body","scrollLeft","onDialogFieldBlur","getDialog","content","fieldClass","for","loading","itemAligned","filled","stackLabel","listeners","onBlur","rawControl","getControl","before","after","position","onDialogBeforeHide","onHide","onDialogHide","onDialogShow","__updateRefocusTarget","rootRef","querySelector","el","activeElement","onControlFocusin","show","newLength","oldLength","updateMenuPosition","updatePosition","hasPopupOpen","onControlFocusout","updatePreState","mobile","ios","assign","getOptionIndex","args","apply","floatingLabel","getControlChild","controlEvents","onFocusin","onFocusout","child","opts","getInnerAppend"],"sources":["/app/node_modules/quasar/src/components/select/QSelect.js"],"sourcesContent":["import { h, ref, computed, watch, onBeforeUpdate, onUpdated, onBeforeUnmount, nextTick, getCurrentInstance } from 'vue'\n\nimport QField from '../field/QField.js'\nimport QIcon from '../icon/QIcon.js'\nimport QChip from '../chip/QChip.js'\n\nimport QItem from '../item/QItem.js'\nimport QItemSection from '../item/QItemSection.js'\nimport QItemLabel from '../item/QItemLabel.js'\n\nimport QMenu from '../menu/QMenu.js'\nimport QDialog from '../dialog/QDialog.js'\n\nimport useField, { useFieldState, useFieldProps, useFieldEmits, fieldValueIsFilled } from '../../composables/private.use-field/use-field.js'\nimport { useVirtualScroll, useVirtualScrollProps } from '../virtual-scroll/use-virtual-scroll.js'\nimport { useFormProps, useFormInputNameAttr } from '../../composables/use-form/private.use-form.js'\nimport useKeyComposition from '../../composables/private.use-key-composition/use-key-composition.js'\n\nimport { createComponent } from '../../utils/private.create/create.js'\nimport { isDeepEqual } from '../../utils/is/is.js'\nimport { stop, prevent, stopAndPrevent } from '../../utils/event/event.js'\nimport { normalizeToInterval } from '../../utils/format/format.js'\nimport { shouldIgnoreKey, isKeyCode } from '../../utils/private.keyboard/key-composition.js'\nimport { hMergeSlot } from '../../utils/private.render/render.js'\n\nconst validateNewValueMode = v => [ 'add', 'add-unique', 'toggle' ].includes(v)\nconst reEscapeList = '.*+?^${}()|[]\\\\'\nconst fieldPropsList = Object.keys(useFieldProps)\n\nfunction getPropValueFn (userPropName, defaultPropName) {\n  if (typeof userPropName === 'function') return userPropName\n\n  const propName = userPropName !== void 0\n    ? userPropName\n    : defaultPropName\n\n  return opt => ((opt !== null && typeof opt === 'object' && propName in opt) ? opt[ propName ] : opt)\n}\n\nexport default createComponent({\n  name: 'QSelect',\n\n  inheritAttrs: false,\n\n  props: {\n    ...useVirtualScrollProps,\n    ...useFormProps,\n    ...useFieldProps,\n\n    // override of useFieldProps > modelValue\n    modelValue: {\n      required: true\n    },\n\n    multiple: Boolean,\n\n    displayValue: [ String, Number ],\n    displayValueHtml: Boolean,\n    dropdownIcon: String,\n\n    options: {\n      type: Array,\n      default: () => []\n    },\n\n    optionValue: [ Function, String ],\n    optionLabel: [ Function, String ],\n    optionDisable: [ Function, String ],\n\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n\n    maxValues: [ Number, String ],\n\n    optionsDense: Boolean,\n    optionsDark: {\n      type: Boolean,\n      default: null\n    },\n    optionsSelectedClass: String,\n    optionsHtml: Boolean,\n\n    optionsCover: Boolean,\n\n    menuShrink: Boolean,\n    menuAnchor: String,\n    menuSelf: String,\n    menuOffset: Array,\n\n    popupContentClass: String,\n    popupContentStyle: [ String, Array, Object ],\n    popupNoRouteDismiss: Boolean,\n\n    useInput: Boolean,\n    useChips: Boolean,\n\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n\n    mapOptions: Boolean,\n    emitValue: Boolean,\n\n    disableTabSelection: Boolean,\n\n    inputDebounce: {\n      type: [ Number, String ],\n      default: 500\n    },\n\n    inputClass: [ Array, String, Object ],\n    inputStyle: [ Array, String, Object ],\n\n    tabindex: {\n      type: [ String, Number ],\n      default: 0\n    },\n\n    autocomplete: String,\n\n    transitionShow: {},\n    transitionHide: {},\n    transitionDuration: {},\n\n    behavior: {\n      type: String,\n      validator: v => [ 'default', 'menu', 'dialog' ].includes(v),\n      default: 'default'\n    },\n\n    // override of useVirtualScrollProps > virtualScrollItemSize (no default)\n    virtualScrollItemSize: useVirtualScrollProps.virtualScrollItemSize.type,\n\n    onNewValue: Function,\n    onFilter: Function\n  },\n\n  emits: [\n    ...useFieldEmits,\n    'add', 'remove', 'inputValue',\n    'keyup', 'keypress', 'keydown',\n    'popupShow', 'popupHide',\n    'filterAbort'\n  ],\n\n  setup (props, { slots, emit }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const menu = ref(false)\n    const dialog = ref(false)\n    const optionIndex = ref(-1)\n    const inputValue = ref('')\n    const dialogFieldFocused = ref(false)\n    const innerLoadingIndicator = ref(false)\n\n    let filterTimer = null, inputValueTimer = null,\n      innerValueCache,\n      hasDialog, userInputValue, filterId = null, defaultInputValue,\n      transitionShowComputed, searchBuffer, searchBufferExp\n\n    const inputRef = ref(null)\n    const targetRef = ref(null)\n    const menuRef = ref(null)\n    const dialogRef = ref(null)\n    const menuContentRef = ref(null)\n\n    const nameProp = useFormInputNameAttr(props)\n\n    const onComposition = useKeyComposition(onInput)\n\n    const virtualScrollLength = computed(() => (\n      Array.isArray(props.options)\n        ? props.options.length\n        : 0\n    ))\n\n    const virtualScrollItemSizeComputed = computed(() => (\n      props.virtualScrollItemSize === void 0\n        ? (props.optionsDense === true ? 24 : 48)\n        : props.virtualScrollItemSize\n    ))\n\n    const {\n      virtualScrollSliceRange,\n      virtualScrollSliceSizeComputed,\n      localResetVirtualScroll,\n      padVirtualScroll,\n      onVirtualScrollEvt,\n      scrollTo,\n      setVirtualScrollSize\n    } = useVirtualScroll({\n      virtualScrollLength, getVirtualScrollTarget, getVirtualScrollEl,\n      virtualScrollItemSizeComputed\n    })\n\n    const state = useFieldState()\n\n    const innerValue = computed(() => {\n      const\n        mapNull = props.mapOptions === true && props.multiple !== true,\n        val = props.modelValue !== void 0 && (props.modelValue !== null || mapNull === true)\n          ? (props.multiple === true && Array.isArray(props.modelValue) ? props.modelValue : [ props.modelValue ])\n          : []\n\n      if (props.mapOptions === true && Array.isArray(props.options) === true) {\n        const cache = props.mapOptions === true && innerValueCache !== void 0\n          ? innerValueCache\n          : []\n        const values = val.map(v => getOption(v, cache))\n\n        return props.modelValue === null && mapNull === true\n          ? values.filter(v => v !== null)\n          : values\n      }\n\n      return val\n    })\n\n    const innerFieldProps = computed(() => {\n      const acc = {}\n      fieldPropsList.forEach(key => {\n        const val = props[ key ]\n        if (val !== void 0) {\n          acc[ key ] = val\n        }\n      })\n      return acc\n    })\n\n    const isOptionsDark = computed(() => (\n      props.optionsDark === null\n        ? state.isDark.value\n        : props.optionsDark\n    ))\n\n    const hasValue = computed(() => fieldValueIsFilled(innerValue.value))\n\n    const computedInputClass = computed(() => {\n      let cls = 'q-field__input q-placeholder col'\n\n      if (props.hideSelected === true || innerValue.value.length === 0) {\n        return [ cls, props.inputClass ]\n      }\n\n      cls += ' q-field__input--padding'\n\n      return props.inputClass === void 0\n        ? cls\n        : [ cls, props.inputClass ]\n    })\n\n    const menuContentClass = computed(() =>\n      (props.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '')\n      + (props.popupContentClass ? ' ' + props.popupContentClass : '')\n    )\n\n    const noOptions = computed(() => virtualScrollLength.value === 0)\n\n    const selectedString = computed(() =>\n      innerValue.value\n        .map(opt => getOptionLabel.value(opt))\n        .join(', ')\n    )\n\n    const ariaCurrentValue = computed(() => (props.displayValue !== void 0\n      ? props.displayValue\n      : selectedString.value\n    ))\n\n    const needsHtmlFn = computed(() => (\n      props.optionsHtml === true\n        ? () => true\n        : opt => opt !== void 0 && opt !== null && opt.html === true\n    ))\n\n    const valueAsHtml = computed(() => (\n      props.displayValueHtml === true || (\n        props.displayValue === void 0 && (\n          props.optionsHtml === true\n          || innerValue.value.some(needsHtmlFn.value)\n        )\n      )\n    ))\n\n    const tabindex = computed(() => (state.focused.value === true ? props.tabindex : -1))\n\n    const comboboxAttrs = computed(() => {\n      const attrs = {\n        tabindex: props.tabindex,\n        role: 'combobox',\n        'aria-label': props.label,\n        'aria-readonly': props.readonly === true ? 'true' : 'false',\n        'aria-autocomplete': props.useInput === true ? 'list' : 'none',\n        'aria-expanded': menu.value === true ? 'true' : 'false',\n        'aria-controls': `${ state.targetUid.value }_lb`\n      }\n\n      if (optionIndex.value >= 0) {\n        attrs[ 'aria-activedescendant' ] = `${ state.targetUid.value }_${ optionIndex.value }`\n      }\n\n      return attrs\n    })\n\n    const listboxAttrs = computed(() => ({\n      id: `${ state.targetUid.value }_lb`,\n      role: 'listbox',\n      'aria-multiselectable': props.multiple === true ? 'true' : 'false'\n    }))\n\n    const selectedScope = computed(() => {\n      return innerValue.value.map((opt, i) => ({\n        index: i,\n        opt,\n        html: needsHtmlFn.value(opt),\n        selected: true,\n        removeAtIndex: removeAtIndexAndFocus,\n        toggleOption,\n        tabindex: tabindex.value\n      }))\n    })\n\n    const optionScope = computed(() => {\n      if (virtualScrollLength.value === 0) {\n        return []\n      }\n\n      const { from, to } = virtualScrollSliceRange.value\n\n      return props.options.slice(from, to).map((opt, i) => {\n        const disable = isOptionDisabled.value(opt) === true\n        const active = isOptionSelected(opt) === true\n        const index = from + i\n\n        const itemProps = {\n          clickable: true,\n          active,\n          activeClass: computedOptionsSelectedClass.value,\n          manualFocus: true,\n          focused: false,\n          disable,\n          tabindex: -1,\n          dense: props.optionsDense,\n          dark: isOptionsDark.value,\n          role: 'option',\n          'aria-selected': active === true ? 'true' : 'false',\n          id: `${ state.targetUid.value }_${ index }`,\n          onClick: () => { toggleOption(opt) }\n        }\n\n        if (disable !== true) {\n          optionIndex.value === index && (itemProps.focused = true)\n\n          if ($q.platform.is.desktop === true) {\n            itemProps.onMousemove = () => { menu.value === true && setOptionIndex(index) }\n          }\n        }\n\n        return {\n          index,\n          opt,\n          html: needsHtmlFn.value(opt),\n          label: getOptionLabel.value(opt),\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption,\n          setOptionIndex,\n          itemProps\n        }\n      })\n    })\n\n    const dropdownArrowIcon = computed(() => (\n      props.dropdownIcon !== void 0\n        ? props.dropdownIcon\n        : $q.iconSet.arrow.dropdown\n    ))\n\n    const squaredMenu = computed(() =>\n      props.optionsCover === false\n      && props.outlined !== true\n      && props.standout !== true\n      && props.borderless !== true\n      && props.rounded !== true\n    )\n\n    const computedOptionsSelectedClass = computed(() => (\n      props.optionsSelectedClass !== void 0\n        ? props.optionsSelectedClass\n        : (props.color !== void 0 ? `text-${ props.color }` : '')\n    ))\n\n    // returns method to get value of an option;\n    // takes into account 'option-value' prop\n    const getOptionValue = computed(() => getPropValueFn(props.optionValue, 'value'))\n\n    // returns method to get label of an option;\n    // takes into account 'option-label' prop\n    const getOptionLabel = computed(() => getPropValueFn(props.optionLabel, 'label'))\n\n    // returns method to tell if an option is disabled;\n    // takes into account 'option-disable' prop\n    const isOptionDisabled = computed(() => getPropValueFn(props.optionDisable, 'disable'))\n\n    const innerOptionsValue = computed(() => innerValue.value.map(getOptionValue.value))\n\n    const inputControlEvents = computed(() => {\n      const evt = {\n        onInput,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        onChange: onComposition,\n        onKeydown: onTargetKeydown,\n        onKeyup: onTargetAutocomplete,\n        onKeypress: onTargetKeypress,\n        onFocus: selectInputText,\n        onClick (e) { hasDialog === true && stop(e) }\n      }\n\n      evt.onCompositionstart = evt.onCompositionupdate = evt.onCompositionend = onComposition\n\n      return evt\n    })\n\n    watch(innerValue, val => {\n      innerValueCache = val\n\n      if (\n        props.useInput === true\n        && props.fillInput === true\n        && props.multiple !== true\n        // Prevent re-entering in filter while filtering\n        // Also prevent clearing inputValue while filtering\n        && state.innerLoading.value !== true\n        && ((dialog.value !== true && menu.value !== true) || hasValue.value !== true)\n      ) {\n        userInputValue !== true && resetInputValue()\n        if (dialog.value === true || menu.value === true) {\n          filter('')\n        }\n      }\n    }, { immediate: true })\n\n    watch(() => props.fillInput, resetInputValue)\n\n    watch(menu, updateMenu)\n\n    watch(virtualScrollLength, rerenderMenu)\n\n    function getEmittingOptionValue (opt) {\n      return props.emitValue === true\n        ? getOptionValue.value(opt)\n        : opt\n    }\n\n    function removeAtIndex (index) {\n      if (index !== -1 && index < innerValue.value.length) {\n        if (props.multiple === true) {\n          const model = props.modelValue.slice()\n          emit('remove', { index, value: model.splice(index, 1)[ 0 ] })\n          emit('update:modelValue', model)\n        }\n        else {\n          emit('update:modelValue', null)\n        }\n      }\n    }\n\n    function removeAtIndexAndFocus (index) {\n      removeAtIndex(index)\n      state.focus()\n    }\n\n    function add (opt, unique) {\n      const val = getEmittingOptionValue(opt)\n\n      if (props.multiple !== true) {\n        props.fillInput === true && updateInputValue(\n          getOptionLabel.value(opt),\n          true,\n          true\n        )\n\n        emit('update:modelValue', val)\n        return\n      }\n\n      if (innerValue.value.length === 0) {\n        emit('add', { index: 0, value: val })\n        emit('update:modelValue', props.multiple === true ? [ val ] : val)\n        return\n      }\n\n      if (\n        unique === true\n        && isOptionSelected(opt) === true\n      ) return\n\n      if (\n        props.maxValues !== void 0\n        && props.modelValue.length >= props.maxValues\n      ) return\n\n      const model = props.modelValue.slice()\n\n      emit('add', { index: model.length, value: val })\n      model.push(val)\n      emit('update:modelValue', model)\n    }\n\n    function toggleOption (opt, keepOpen) {\n      if (\n        state.editable.value !== true\n        || opt === void 0\n        || isOptionDisabled.value(opt) === true\n      ) return\n\n      const optValue = getOptionValue.value(opt)\n\n      if (props.multiple !== true) {\n        if (keepOpen !== true) {\n          updateInputValue(\n            props.fillInput === true ? getOptionLabel.value(opt) : '',\n            true,\n            true\n          )\n\n          hidePopup()\n        }\n\n        targetRef.value !== null && targetRef.value.focus()\n\n        if (\n          innerValue.value.length === 0\n          || isDeepEqual(getOptionValue.value(innerValue.value[ 0 ]), optValue) !== true\n        ) {\n          emit('update:modelValue', props.emitValue === true ? optValue : opt)\n        }\n\n        return\n      }\n\n      (hasDialog !== true || dialogFieldFocused.value === true) && state.focus()\n\n      selectInputText()\n\n      if (innerValue.value.length === 0) {\n        const val = props.emitValue === true ? optValue : opt\n        emit('add', { index: 0, value: val })\n        emit('update:modelValue', props.multiple === true ? [ val ] : val)\n        return\n      }\n\n      const\n        model = props.modelValue.slice(),\n        index = innerOptionsValue.value.findIndex(v => isDeepEqual(v, optValue))\n\n      if (index !== -1) {\n        emit('remove', { index, value: model.splice(index, 1)[ 0 ] })\n      }\n      else {\n        if (\n          props.maxValues !== void 0\n          && model.length >= props.maxValues\n        ) return\n\n        const val = props.emitValue === true ? optValue : opt\n\n        emit('add', { index: model.length, value: val })\n        model.push(val)\n      }\n\n      emit('update:modelValue', model)\n    }\n\n    function setOptionIndex (index) {\n      if ($q.platform.is.desktop !== true) return\n\n      const val = index !== -1 && index < virtualScrollLength.value\n        ? index\n        : -1\n\n      if (optionIndex.value !== val) {\n        optionIndex.value = val\n      }\n    }\n\n    function moveOptionSelection (offset = 1, skipInputValue) {\n      if (menu.value === true) {\n        let index = optionIndex.value\n        do {\n          index = normalizeToInterval(\n            index + offset,\n            -1,\n            virtualScrollLength.value - 1\n          )\n        }\n        while (index !== -1 && index !== optionIndex.value && isOptionDisabled.value(props.options[ index ]) === true)\n\n        if (optionIndex.value !== index) {\n          setOptionIndex(index)\n          scrollTo(index)\n\n          if (skipInputValue !== true && props.useInput === true && props.fillInput === true) {\n            setInputValue(\n              index >= 0\n                ? getOptionLabel.value(props.options[ index ])\n                : defaultInputValue,\n              true\n            )\n          }\n        }\n      }\n    }\n\n    function getOption (value, valueCache) {\n      const fn = opt => isDeepEqual(getOptionValue.value(opt), value)\n      return props.options.find(fn) || valueCache.find(fn) || value\n    }\n\n    function isOptionSelected (opt) {\n      const val = getOptionValue.value(opt)\n      return innerOptionsValue.value.find(v => isDeepEqual(v, val)) !== void 0\n    }\n\n    function selectInputText (e) {\n      if (\n        props.useInput === true\n        && targetRef.value !== null\n        && (e === void 0 || (targetRef.value === e.target && e.target.value === selectedString.value))\n      ) {\n        targetRef.value.select()\n      }\n    }\n\n    function onTargetKeyup (e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (isKeyCode(e, 27) === true && menu.value === true) {\n        stop(e)\n        // on ESC we need to close the dialog also\n        hidePopup()\n        resetInputValue()\n      }\n\n      emit('keyup', e)\n    }\n\n    function onTargetAutocomplete (e) {\n      const { value } = e.target\n\n      if (e.keyCode !== void 0) {\n        onTargetKeyup(e)\n        return\n      }\n\n      e.target.value = ''\n\n      if (filterTimer !== null) {\n        clearTimeout(filterTimer)\n        filterTimer = null\n      }\n      if (inputValueTimer !== null) {\n        clearTimeout(inputValueTimer)\n        inputValueTimer = null\n      }\n\n      resetInputValue()\n\n      if (typeof value === 'string' && value.length !== 0) {\n        const needle = value.toLocaleLowerCase()\n        const findFn = extractFn => {\n          const option = props.options.find(opt => String(extractFn.value(opt)).toLocaleLowerCase() === needle)\n\n          if (option === void 0) return false\n\n          if (innerValue.value.indexOf(option) === -1) {\n            toggleOption(option)\n          }\n          else {\n            hidePopup()\n          }\n\n          return true\n        }\n        const fillFn = afterFilter => {\n          if (\n            findFn(getOptionValue) !== true\n            && afterFilter !== true\n            && findFn(getOptionLabel) !== true\n          ) {\n            filter(value, true, () => fillFn(true))\n          }\n        }\n\n        fillFn()\n      }\n      else {\n        state.clearValue(e)\n      }\n    }\n\n    function onTargetKeypress (e) {\n      emit('keypress', e)\n    }\n\n    function onTargetKeydown (e) {\n      emit('keydown', e)\n\n      if (shouldIgnoreKey(e) === true) return\n\n      const newValueModeValid = inputValue.value.length !== 0\n        && (props.newValueMode !== void 0 || props.onNewValue !== void 0)\n\n      const tabShouldSelect = e.shiftKey !== true\n        && props.disableTabSelection !== true\n        && props.multiple !== true\n        && (optionIndex.value !== -1 || newValueModeValid === true)\n\n      // escape\n      if (e.keyCode === 27) {\n        prevent(e) // prevent clearing the inputValue\n        return\n      }\n\n      // tab\n      if (e.keyCode === 9 && tabShouldSelect === false) {\n        closeMenu()\n        return\n      }\n\n      if (\n        e.target === void 0\n        || e.target.id !== state.targetUid.value\n        || state.editable.value !== true\n      ) return\n\n      // down\n      if (\n        e.keyCode === 40\n        && state.innerLoading.value !== true\n        && menu.value === false\n      ) {\n        stopAndPrevent(e)\n        showPopup()\n        return\n      }\n\n      // backspace\n      if (\n        e.keyCode === 8\n        && (\n          props.useChips === true\n          || props.clearable === true\n        )\n        && props.hideSelected !== true\n        && inputValue.value.length === 0\n      ) {\n        if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n          removeAtIndex(props.modelValue.length - 1)\n        }\n        else if (props.multiple !== true && props.modelValue !== null) {\n          emit('update:modelValue', null)\n        }\n\n        return\n      }\n\n      // home, end - 36, 35\n      if (\n        (e.keyCode === 35 || e.keyCode === 36)\n        && (typeof inputValue.value !== 'string' || inputValue.value.length === 0)\n      ) {\n        stopAndPrevent(e)\n        optionIndex.value = -1\n        moveOptionSelection(e.keyCode === 36 ? 1 : -1, props.multiple)\n      }\n\n      // pg up, pg down - 33, 34\n      if (\n        (e.keyCode === 33 || e.keyCode === 34)\n        && virtualScrollSliceSizeComputed.value !== void 0\n      ) {\n        stopAndPrevent(e)\n        optionIndex.value = Math.max(\n          -1,\n          Math.min(\n            virtualScrollLength.value,\n            optionIndex.value + (e.keyCode === 33 ? -1 : 1) * virtualScrollSliceSizeComputed.value.view\n          )\n        )\n        moveOptionSelection(e.keyCode === 33 ? 1 : -1, props.multiple)\n      }\n\n      // up, down\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e)\n        moveOptionSelection(e.keyCode === 38 ? -1 : 1, props.multiple)\n      }\n\n      const optionsLength = virtualScrollLength.value\n\n      // clear search buffer if expired\n      if (searchBuffer === void 0 || searchBufferExp < Date.now()) {\n        searchBuffer = ''\n      }\n\n      // keyboard search when not having use-input\n      if (\n        optionsLength > 0\n        && props.useInput !== true\n        && e.key !== void 0\n        && e.key.length === 1 // printable char\n        && e.altKey === false // not kbd shortcut\n        && e.ctrlKey === false // not kbd shortcut\n        && e.metaKey === false // not kbd shortcut, especially on macOS with Command key\n        && (e.keyCode !== 32 || searchBuffer.length !== 0) // space in middle of search\n      ) {\n        menu.value !== true && showPopup(e)\n\n        const\n          char = e.key.toLocaleLowerCase(),\n          keyRepeat = searchBuffer.length === 1 && searchBuffer[ 0 ] === char\n\n        searchBufferExp = Date.now() + 1500\n        if (keyRepeat === false) {\n          stopAndPrevent(e)\n          searchBuffer += char\n        }\n\n        const searchRe = new RegExp('^' + searchBuffer.split('').map(l => (reEscapeList.indexOf(l) !== -1 ? '\\\\' + l : l)).join('.*'), 'i')\n\n        let index = optionIndex.value\n\n        if (keyRepeat === true || index < 0 || searchRe.test(getOptionLabel.value(props.options[ index ])) !== true) {\n          do {\n            index = normalizeToInterval(index + 1, -1, optionsLength - 1)\n          }\n          while (index !== optionIndex.value && (\n            isOptionDisabled.value(props.options[ index ]) === true\n            || searchRe.test(getOptionLabel.value(props.options[ index ])) !== true\n          ))\n        }\n\n        if (optionIndex.value !== index) {\n          nextTick(() => {\n            setOptionIndex(index)\n            scrollTo(index)\n\n            if (index >= 0 && props.useInput === true && props.fillInput === true) {\n              setInputValue(getOptionLabel.value(props.options[ index ]), true)\n            }\n          })\n        }\n\n        return\n      }\n\n      // enter, space (when not using use-input and not in search), or tab (when not using multiple and option selected)\n      // same target is checked above\n      if (\n        e.keyCode !== 13\n        && (e.keyCode !== 32 || props.useInput === true || searchBuffer !== '')\n        && (e.keyCode !== 9 || tabShouldSelect === false)\n      ) return\n\n      e.keyCode !== 9 && stopAndPrevent(e)\n\n      if (optionIndex.value !== -1 && optionIndex.value < optionsLength) {\n        toggleOption(props.options[ optionIndex.value ])\n        return\n      }\n\n      if (newValueModeValid === true) {\n        const done = (val, mode) => {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) return\n          }\n          else {\n            mode = props.newValueMode\n          }\n\n          updateInputValue('', props.multiple !== true, true)\n\n          if (val === void 0 || val === null) return\n\n          const fn = mode === 'toggle' ? toggleOption : add\n          fn(val, mode === 'add-unique')\n\n          if (props.multiple !== true) {\n            targetRef.value !== null && targetRef.value.focus()\n            hidePopup()\n          }\n        }\n\n        if (props.onNewValue !== void 0) {\n          emit('newValue', inputValue.value, done)\n        }\n        else {\n          done(inputValue.value)\n        }\n\n        if (props.multiple !== true) return\n      }\n\n      if (menu.value === true) {\n        closeMenu()\n      }\n      else if (state.innerLoading.value !== true) {\n        showPopup()\n      }\n    }\n\n    function getVirtualScrollEl () {\n      return hasDialog === true\n        ? menuContentRef.value\n        : (\n            menuRef.value !== null && menuRef.value.contentEl !== null\n              ? menuRef.value.contentEl\n              : void 0\n          )\n    }\n\n    function getVirtualScrollTarget () {\n      return getVirtualScrollEl()\n    }\n\n    function getSelection () {\n      if (props.hideSelected === true) {\n        return []\n      }\n\n      if (slots[ 'selected-item' ] !== void 0) {\n        return selectedScope.value.map(scope => slots[ 'selected-item' ](scope)).slice()\n      }\n\n      if (slots.selected !== void 0) {\n        return [].concat(slots.selected())\n      }\n\n      if (props.useChips === true) {\n        return selectedScope.value.map((scope, i) => h(QChip, {\n          key: 'option-' + i,\n          removable: state.editable.value === true && isOptionDisabled.value(scope.opt) !== true,\n          dense: true,\n          textColor: props.color,\n          tabindex: tabindex.value,\n          onRemove () { scope.removeAtIndex(i) }\n        }, () => h('span', {\n          class: 'ellipsis',\n          [ scope.html === true ? 'innerHTML' : 'textContent' ]: getOptionLabel.value(scope.opt)\n        })))\n      }\n\n      return [\n        h('span', {\n          [ valueAsHtml.value === true ? 'innerHTML' : 'textContent' ]: ariaCurrentValue.value\n        })\n      ]\n    }\n\n    function getAllOptions () {\n      if (noOptions.value === true) {\n        return slots[ 'no-option' ] !== void 0\n          ? slots[ 'no-option' ]({ inputValue: inputValue.value })\n          : void 0\n      }\n\n      const fn = slots.option !== void 0\n        ? slots.option\n        : scope => {\n          return h(QItem, {\n            key: scope.index,\n            ...scope.itemProps\n          }, () => {\n            return h(\n              QItemSection,\n              () => h(\n                QItemLabel,\n                () => h('span', {\n                  [ scope.html === true ? 'innerHTML' : 'textContent' ]: scope.label\n                })\n              )\n            )\n          })\n        }\n\n      let options = padVirtualScroll('div', optionScope.value.map(fn))\n\n      if (slots[ 'before-options' ] !== void 0) {\n        options = slots[ 'before-options' ]().concat(options)\n      }\n\n      return hMergeSlot(slots[ 'after-options' ], options)\n    }\n\n    function getInput (fromDialog, isTarget) {\n      const attrs = isTarget === true ? { ...comboboxAttrs.value, ...state.splitAttrs.attributes.value } : void 0\n\n      const data = {\n        ref: isTarget === true ? targetRef : void 0,\n        key: 'i_t',\n        class: computedInputClass.value,\n        style: props.inputStyle,\n        value: inputValue.value !== void 0 ? inputValue.value : '',\n        // required for Android in order to show ENTER key when in form\n        type: 'search',\n        ...attrs,\n        id: isTarget === true ? state.targetUid.value : void 0,\n        maxlength: props.maxlength,\n        autocomplete: props.autocomplete,\n        'data-autofocus': fromDialog === true || props.autofocus === true || void 0,\n        disabled: props.disable === true,\n        readonly: props.readonly === true,\n        ...inputControlEvents.value\n      }\n\n      if (fromDialog !== true && hasDialog === true) {\n        if (Array.isArray(data.class) === true) {\n          data.class = [ ...data.class, 'no-pointer-events' ]\n        }\n        else {\n          data.class += ' no-pointer-events'\n        }\n      }\n\n      return h('input', data)\n    }\n\n    function onInput (e) {\n      if (filterTimer !== null) {\n        clearTimeout(filterTimer)\n        filterTimer = null\n      }\n      if (inputValueTimer !== null) {\n        clearTimeout(inputValueTimer)\n        inputValueTimer = null\n      }\n\n      if (\n        e\n        && e.target\n        && e.target.qComposing === true\n      ) return\n\n      setInputValue(e.target.value || '')\n      // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n      userInputValue = true\n      defaultInputValue = inputValue.value\n\n      if (\n        state.focused.value !== true\n        && (hasDialog !== true || dialogFieldFocused.value === true)\n      ) {\n        state.focus()\n      }\n\n      if (props.onFilter !== void 0) {\n        filterTimer = setTimeout(() => {\n          filterTimer = null\n          filter(inputValue.value)\n        }, props.inputDebounce)\n      }\n    }\n\n    function setInputValue (val, emitImmediately) {\n      if (inputValue.value !== val) {\n        inputValue.value = val\n\n        if (emitImmediately === true || props.inputDebounce === 0 || props.inputDebounce === '0') {\n          emit('inputValue', val)\n        }\n        else {\n          inputValueTimer = setTimeout(() => {\n            inputValueTimer = null\n            emit('inputValue', val)\n          }, props.inputDebounce)\n        }\n      }\n    }\n\n    function updateInputValue (val, noFiltering, internal) {\n      userInputValue = internal !== true\n\n      if (props.useInput === true) {\n        setInputValue(val, true)\n\n        if (noFiltering === true || internal !== true) {\n          defaultInputValue = val\n        }\n\n        noFiltering !== true && filter(val)\n      }\n    }\n\n    function filter (val, keepClosed, afterUpdateFn) {\n      if (\n        props.onFilter === void 0\n        || (keepClosed !== true && state.focused.value !== true)\n      ) return\n\n      if (state.innerLoading.value === true) {\n        emit('filterAbort')\n      }\n      else {\n        state.innerLoading.value = true\n        innerLoadingIndicator.value = true\n      }\n\n      if (\n        val !== ''\n        && props.multiple !== true\n        && innerValue.value.length !== 0\n        && userInputValue !== true\n        && val === getOptionLabel.value(innerValue.value[ 0 ])\n      ) {\n        val = ''\n      }\n\n      const localFilterId = setTimeout(() => {\n        menu.value === true && (menu.value = false)\n      }, 10)\n\n      filterId !== null && clearTimeout(filterId)\n      filterId = localFilterId\n\n      emit(\n        'filter',\n        val,\n        (fn, afterFn) => {\n          if ((keepClosed === true || state.focused.value === true) && filterId === localFilterId) {\n            clearTimeout(filterId)\n\n            typeof fn === 'function' && fn()\n\n            // hide indicator to allow arrow to animate\n            innerLoadingIndicator.value = false\n\n            nextTick(() => {\n              state.innerLoading.value = false\n\n              if (state.editable.value === true) {\n                if (keepClosed === true) {\n                  menu.value === true && hidePopup()\n                }\n                else if (menu.value === true) {\n                  updateMenu(true)\n                }\n                else {\n                  menu.value = true\n                }\n              }\n\n              typeof afterFn === 'function' && nextTick(() => { afterFn(proxy) })\n              typeof afterUpdateFn === 'function' && nextTick(() => { afterUpdateFn(proxy) })\n            })\n          }\n        },\n        () => {\n          if (state.focused.value === true && filterId === localFilterId) {\n            clearTimeout(filterId)\n            state.innerLoading.value = false\n            innerLoadingIndicator.value = false\n          }\n          menu.value === true && (menu.value = false)\n        }\n      )\n    }\n\n    function getMenu () {\n      return h(QMenu, {\n        ref: menuRef,\n        class: menuContentClass.value,\n        style: props.popupContentStyle,\n        modelValue: menu.value,\n        fit: props.menuShrink !== true,\n        cover: props.optionsCover === true && noOptions.value !== true && props.useInput !== true,\n        anchor: props.menuAnchor,\n        self: props.menuSelf,\n        offset: props.menuOffset,\n        dark: isOptionsDark.value,\n        noParentEvent: true,\n        noRefocus: true,\n        noFocus: true,\n        noRouteDismiss: props.popupNoRouteDismiss,\n        square: squaredMenu.value,\n        transitionShow: props.transitionShow,\n        transitionHide: props.transitionHide,\n        transitionDuration: props.transitionDuration,\n        separateClosePopup: true,\n        ...listboxAttrs.value,\n        onScrollPassive: onVirtualScrollEvt,\n        onBeforeShow: onControlPopupShow,\n        onBeforeHide: onMenuBeforeHide,\n        onShow: onMenuShow\n      }, getAllOptions)\n    }\n\n    function onMenuBeforeHide (e) {\n      onControlPopupHide(e)\n      closeMenu()\n    }\n\n    function onMenuShow () {\n      setVirtualScrollSize()\n    }\n\n    function onDialogFieldFocus (e) {\n      stop(e)\n      targetRef.value !== null && targetRef.value.focus()\n      dialogFieldFocused.value = true\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0)\n    }\n\n    function onDialogFieldBlur (e) {\n      stop(e)\n      nextTick(() => {\n        dialogFieldFocused.value = false\n      })\n    }\n\n    function getDialog () {\n      const content = [\n        h(QField, {\n          class: `col-auto ${ state.fieldClass.value }`,\n          ...innerFieldProps.value,\n          for: state.targetUid.value,\n          dark: isOptionsDark.value,\n          square: true,\n          loading: innerLoadingIndicator.value,\n          itemAligned: false,\n          filled: true,\n          stackLabel: inputValue.value.length !== 0,\n          ...state.splitAttrs.listeners.value,\n          onFocus: onDialogFieldFocus,\n          onBlur: onDialogFieldBlur\n        }, {\n          ...slots,\n          rawControl: () => state.getControl(true),\n          before: void 0,\n          after: void 0\n        })\n      ]\n\n      menu.value === true && content.push(\n        h('div', {\n          ref: menuContentRef,\n          class: menuContentClass.value + ' scroll',\n          style: props.popupContentStyle,\n          ...listboxAttrs.value,\n          onClick: prevent,\n          onScrollPassive: onVirtualScrollEvt\n        }, getAllOptions())\n      )\n\n      return h(QDialog, {\n        ref: dialogRef,\n        modelValue: dialog.value,\n        position: props.useInput === true ? 'top' : void 0,\n        transitionShow: transitionShowComputed,\n        transitionHide: props.transitionHide,\n        transitionDuration: props.transitionDuration,\n        noRouteDismiss: props.popupNoRouteDismiss,\n        onBeforeShow: onControlPopupShow,\n        onBeforeHide: onDialogBeforeHide,\n        onHide: onDialogHide,\n        onShow: onDialogShow\n      }, () => h('div', {\n        class: 'q-select__dialog'\n          + (isOptionsDark.value === true ? ' q-select__dialog--dark q-dark' : '')\n          + (dialogFieldFocused.value === true ? ' q-select__dialog--focused' : '')\n      }, content))\n    }\n\n    function onDialogBeforeHide (e) {\n      onControlPopupHide(e)\n\n      if (dialogRef.value !== null) {\n        dialogRef.value.__updateRefocusTarget(\n          state.rootRef.value.querySelector('.q-field__native > [tabindex]:last-child')\n        )\n      }\n\n      state.focused.value = false\n    }\n\n    function onDialogHide (e) {\n      hidePopup()\n      state.focused.value === false && emit('blur', e)\n      resetInputValue()\n    }\n\n    function onDialogShow () {\n      const el = document.activeElement\n      if (\n        (el === null || el.id !== state.targetUid.value)\n        && targetRef.value !== null\n        && targetRef.value !== el\n      ) {\n        targetRef.value.focus()\n      }\n\n      setVirtualScrollSize()\n    }\n\n    function closeMenu () {\n      if (dialog.value === true) return\n\n      optionIndex.value = -1\n\n      if (menu.value === true) {\n        menu.value = false\n      }\n\n      if (state.focused.value === false) {\n        if (filterId !== null) {\n          clearTimeout(filterId)\n          filterId = null\n        }\n\n        if (state.innerLoading.value === true) {\n          emit('filterAbort')\n          state.innerLoading.value = false\n          innerLoadingIndicator.value = false\n        }\n      }\n    }\n\n    function showPopup (e) {\n      if (state.editable.value !== true) return\n\n      if (hasDialog === true) {\n        state.onControlFocusin(e)\n        dialog.value = true\n        nextTick(() => {\n          state.focus()\n        })\n      }\n      else {\n        state.focus()\n      }\n\n      if (props.onFilter !== void 0) {\n        filter(inputValue.value)\n      }\n      else if (noOptions.value !== true || slots[ 'no-option' ] !== void 0) {\n        menu.value = true\n      }\n    }\n\n    function hidePopup () {\n      dialog.value = false\n      closeMenu()\n    }\n\n    function resetInputValue () {\n      props.useInput === true && updateInputValue(\n        props.multiple !== true && props.fillInput === true && innerValue.value.length !== 0\n          ? getOptionLabel.value(innerValue.value[ 0 ]) || ''\n          : '',\n        true,\n        true\n      )\n    }\n\n    function updateMenu (show) {\n      let optionIndex = -1\n\n      if (show === true) {\n        if (innerValue.value.length !== 0) {\n          const val = getOptionValue.value(innerValue.value[ 0 ])\n          optionIndex = props.options.findIndex(v => isDeepEqual(getOptionValue.value(v), val))\n        }\n\n        localResetVirtualScroll(optionIndex)\n      }\n\n      setOptionIndex(optionIndex)\n    }\n\n    function rerenderMenu (newLength, oldLength) {\n      if (menu.value === true && state.innerLoading.value === false) {\n        localResetVirtualScroll(-1, true)\n\n        nextTick(() => {\n          if (menu.value === true && state.innerLoading.value === false) {\n            if (newLength > oldLength) {\n              localResetVirtualScroll()\n            }\n            else {\n              updateMenu(true)\n            }\n          }\n        })\n      }\n    }\n\n    function updateMenuPosition () {\n      if (dialog.value === false && menuRef.value !== null) {\n        menuRef.value.updatePosition()\n      }\n    }\n\n    function onControlPopupShow (e) {\n      e !== void 0 && stop(e)\n      emit('popupShow', e)\n      state.hasPopupOpen = true\n      state.onControlFocusin(e)\n    }\n\n    function onControlPopupHide (e) {\n      e !== void 0 && stop(e)\n      emit('popupHide', e)\n      state.hasPopupOpen = false\n      state.onControlFocusout(e)\n    }\n\n    function updatePreState () {\n      hasDialog = $q.platform.is.mobile !== true && props.behavior !== 'dialog'\n        ? false\n        : props.behavior !== 'menu' && (\n          props.useInput === true\n            ? slots[ 'no-option' ] !== void 0 || props.onFilter !== void 0 || noOptions.value === false\n            : true\n        )\n\n      transitionShowComputed = $q.platform.is.ios === true && hasDialog === true && props.useInput === true\n        ? 'fade'\n        : props.transitionShow\n    }\n\n    onBeforeUpdate(updatePreState)\n    onUpdated(updateMenuPosition)\n\n    updatePreState()\n\n    onBeforeUnmount(() => {\n      filterTimer !== null && clearTimeout(filterTimer)\n      inputValueTimer !== null && clearTimeout(inputValueTimer)\n    })\n\n    // expose public methods\n    Object.assign(proxy, {\n      showPopup, hidePopup,\n      removeAtIndex, add, toggleOption,\n      getOptionIndex: () => optionIndex.value,\n      setOptionIndex, moveOptionSelection,\n      filter, updateMenuPosition, updateInputValue,\n      isOptionSelected,\n      getEmittingOptionValue,\n      isOptionDisabled: (...args) => isOptionDisabled.value.apply(null, args) === true,\n      getOptionValue: (...args) => getOptionValue.value.apply(null, args),\n      getOptionLabel: (...args) => getOptionLabel.value.apply(null, args)\n    })\n\n    Object.assign(state, {\n      innerValue,\n\n      fieldClass: computed(() =>\n        `q-select q-field--auto-height q-select--with${ props.useInput !== true ? 'out' : '' }-input`\n        + ` q-select--with${ props.useChips !== true ? 'out' : '' }-chips`\n        + ` q-select--${ props.multiple === true ? 'multiple' : 'single' }`\n      ),\n\n      inputRef,\n      targetRef,\n      hasValue,\n      showPopup,\n\n      floatingLabel: computed(() =>\n        (props.hideSelected !== true && hasValue.value === true)\n        || typeof inputValue.value === 'number'\n        || inputValue.value.length !== 0\n        || fieldValueIsFilled(props.displayValue)\n      ),\n\n      getControlChild: () => {\n        if (\n          state.editable.value !== false && (\n            dialog.value === true // dialog always has menu displayed, so need to render it\n            || noOptions.value !== true\n            || slots[ 'no-option' ] !== void 0\n          )\n        ) {\n          return hasDialog === true ? getDialog() : getMenu()\n        }\n        else if (state.hasPopupOpen === true) {\n          // explicitly set it otherwise TAB will not blur component\n          state.hasPopupOpen = false\n        }\n      },\n\n      controlEvents: {\n        onFocusin (e) { state.onControlFocusin(e) },\n        onFocusout (e) {\n          state.onControlFocusout(e, () => {\n            resetInputValue()\n            closeMenu()\n          })\n        },\n        onClick (e) {\n          // label from QField will propagate click on the input\n          prevent(e)\n\n          if (hasDialog !== true && menu.value === true) {\n            closeMenu()\n            targetRef.value !== null && targetRef.value.focus()\n            return\n          }\n\n          showPopup(e)\n        }\n      },\n\n      getControl: fromDialog => {\n        const child = getSelection()\n        const isTarget = fromDialog === true || dialog.value !== true || hasDialog !== true\n\n        if (props.useInput === true) {\n          child.push(getInput(fromDialog, isTarget))\n        }\n        // there can be only one (when dialog is opened the control in dialog should be target)\n        else if (state.editable.value === true) {\n          const attrs = isTarget === true ? comboboxAttrs.value : void 0\n\n          child.push(\n            h('input', {\n              ref: isTarget === true ? targetRef : void 0,\n              key: 'd_t',\n              class: 'q-select__focus-target',\n              id: isTarget === true ? state.targetUid.value : void 0,\n              value: ariaCurrentValue.value,\n              readonly: true,\n              'data-autofocus': fromDialog === true || props.autofocus === true || void 0,\n              ...attrs,\n              onKeydown: onTargetKeydown,\n              onKeyup: onTargetKeyup,\n              onKeypress: onTargetKeypress\n            })\n          )\n\n          if (isTarget === true && typeof props.autocomplete === 'string' && props.autocomplete.length !== 0) {\n            child.push(\n              h('input', {\n                class: 'q-select__autocomplete-input',\n                autocomplete: props.autocomplete,\n                tabindex: -1,\n                onKeyup: onTargetAutocomplete\n              })\n            )\n          }\n        }\n\n        if (nameProp.value !== void 0 && props.disable !== true && innerOptionsValue.value.length !== 0) {\n          const opts = innerOptionsValue.value.map(value => h('option', { value, selected: true }))\n\n          child.push(\n            h('select', {\n              class: 'hidden',\n              name: nameProp.value,\n              multiple: props.multiple\n            }, opts)\n          )\n        }\n\n        const attrs = props.useInput === true || isTarget !== true ? void 0 : state.splitAttrs.attributes.value\n\n        return h('div', {\n          class: 'q-field__native row items-center',\n          ...attrs,\n          ...state.splitAttrs.listeners.value\n        }, child)\n      },\n\n      getInnerAppend: () => (\n        props.loading !== true && innerLoadingIndicator.value !== true && props.hideDropdownIcon !== true\n          ? [\n              h(QIcon, {\n                class: 'q-select__dropdown-icon' + (menu.value === true ? ' rotate-180' : ''),\n                name: dropdownArrowIcon.value\n              })\n            ]\n          : null\n      )\n    })\n\n    return useField(state)\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}